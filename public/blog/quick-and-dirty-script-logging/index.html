<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta http-equiv=content-security-policy content="upgrade-insecure-requests; block-all-mixed-content; default-src 'self'; child-src 'self'; font-src 'self' https://fonts.gstatic.com https://cdn.jsdelivr.net/; form-action 'self'; frame-src 'self'; img-src 'self'; object-src 'none'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com/ https://cdn.jsdelivr.net/; script-src 'self' 'unsafe-inline' https://www.google-analytics.com https://cdn.jsdelivr.net/; prefetch-src 'self'; connect-src 'self' https://www.google-analytics.com;"><meta name=author content="Brian Osborne"><meta name=description content="I write quite a bit of Ruby scripts that run at scheduled intervals via cron, and need a way to monitor their output easily. Ruby has a few popular logging solutions, including one that is part of the standard library, that can be fairly easy to integrate into your script.
For a quick script, I find it unnecessary to add the overhead of a logger class and get it all set up."><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Quick and dirty script logging"><meta name=twitter:description content="I write quite a bit of Ruby scripts that run at scheduled intervals via cron, and need a way to monitor their output easily. Ruby has a few popular logging solutions, including one that is part of the standard library, that can be fairly easy to integrate into your script.
For a quick script, I find it unnecessary to add the overhead of a logger class and get it all set up."><meta property="og:title" content="Quick and dirty script logging"><meta property="og:description" content="I write quite a bit of Ruby scripts that run at scheduled intervals via cron, and need a way to monitor their output easily. Ruby has a few popular logging solutions, including one that is part of the standard library, that can be fairly easy to integrate into your script.
For a quick script, I find it unnecessary to add the overhead of a logger class and get it all set up."><meta property="og:type" content="article"><meta property="og:url" content="http://www.example.com/blog/quick-and-dirty-script-logging/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2013-09-24T00:00:00-04:00"><meta property="article:modified_time" content="2013-09-24T00:00:00-04:00"><title>Quick and dirty script logging · Brian Osborne</title><link rel=canonical href=http://www.example.com/blog/quick-and-dirty-script-logging/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.531b74bda2bd1e0562323a98f617314ce9c7cc8c8cffbc609f5f690abf6ac68c.css integrity="sha256-Uxt0vaK9HgViMjqY9hcxTOnHzIyM/7xgn19pCr9qxow=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.002ee2378e14c7a68f1f0a53d9694ed252090987c4e768023fac694a4fc5f793.css integrity="sha256-AC7iN44Ux6aPHwpT2WlO0lIJCYfE52gCP6xpSk/F95M=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><meta name=generator content="Hugo 0.82.1"></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Brian Osborne</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=http://www.example.com/blog/quick-and-dirty-script-logging/>Quick and dirty script logging</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2013-09-24T00:00:00-04:00>September 24, 2013</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
2-minute read</span></div></div></header><div><p>I write quite a bit of Ruby scripts that run at scheduled intervals via cron, and need a way to monitor their output easily. Ruby has a few popular logging solutions, including one that is part of the standard library, that can be fairly easy to integrate into your script.</p><p>For a quick script, I find it unnecessary to add the overhead of a logger class and get it all set up. I also like to write output directly to standard out so that I can run the script manually and easily see its output without having to check the log file (though I am aware I can setup Ruby loggers to log to both a file and stdout).</p><p>When writing a Ruby script, I&rsquo;ll write out any useful data using <code>puts</code>. I may prepend the puts argument with a <code>Time.now</code> which is helpful for long running scripts. Then, since Ruby will buffer its output to STDOUT, I include <code>STDOUT.sync = true</code> and STDERR.sync = true at the top of my code. This will immediately flush the buffers, allowing me to monitor the script progress by tailing the log without waiting for the script to finish execution.</p><p>So how do we capture this output to a log file?</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>/path/to/script.rb &gt;&gt; /var/log/script.log 2&gt;&amp;1
</code></pre></div><p>Put this in a crontab and you&rsquo;re set. We&rsquo;re concatenating the output of script.rb to script.log, and redirecting standard out into standard error. This ensures that any errors that may occur in the script will also be sent to the log, which is very important.</p><p>After that, all you have to do is set up a simple log rotate config to cycle your logs and you&rsquo;re good to go. Now you can be confident that your script will logs its output, including errors, while still allowing you to see the same output while running the script manually.</p><p>Another benefit is that I can write Ruby or bash scripts and capture their output all the time. A lot of my Ruby scripts will just shell out commands, and it&rsquo;s nice to not have to worry about capturing the stdout and stderr of the shelled out command and then passing it to a logger.</p></div><footer><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//bkosborne.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></footer></article></section></div><footer class=footer><section class=container>©
2010 -
2022
Brian Osborne
·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/coder.min.39a51230dce2ac866c049b52573e38bf60666af4bc63c1bdf203b9b2d95b1cd6.js integrity="sha256-OaUSMNzirIZsBJtSVz44v2BmavS8Y8G98gO5stlbHNY="></script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "bd8a23ecd0e34c58a89099ab25d009a"}'></script></body></html>