<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta http-equiv=content-security-policy content="upgrade-insecure-requests; block-all-mixed-content; default-src 'self'; child-src 'self'; font-src 'self' https://fonts.gstatic.com https://cdn.jsdelivr.net/; form-action 'self'; frame-src 'self'; img-src 'self'; object-src 'none'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com/ https://cdn.jsdelivr.net/; script-src 'self' 'unsafe-inline' https://www.google-analytics.com https://cdn.jsdelivr.net/; prefetch-src 'self'; connect-src 'self' https://www.google-analytics.com;"><meta name=author content="Brian Osborne"><meta name=description content="At DrupalCamp NJ (the first ever, glad NJ is getting some love!), Jesse Beach from Acquia presented her thoughts how content is served in Drupal, and how to fix some problems that have surfaced over the years of web development. The traditional method for serving content to browsers is to have the server send off the entire DOM all at once. This was okay when websites were much simpler and developers created them using individual HTML pages, but websites are much more complicated now and often behind a complex CMS like Drupal."><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Client-side content inclusion in Drupal"><meta name=twitter:description content="At DrupalCamp NJ (the first ever, glad NJ is getting some love!), Jesse Beach from Acquia presented her thoughts how content is served in Drupal, and how to fix some problems that have surfaced over the years of web development. The traditional method for serving content to browsers is to have the server send off the entire DOM all at once. This was okay when websites were much simpler and developers created them using individual HTML pages, but websites are much more complicated now and often behind a complex CMS like Drupal."><meta property="og:title" content="Client-side content inclusion in Drupal"><meta property="og:description" content="At DrupalCamp NJ (the first ever, glad NJ is getting some love!), Jesse Beach from Acquia presented her thoughts how content is served in Drupal, and how to fix some problems that have surfaced over the years of web development. The traditional method for serving content to browsers is to have the server send off the entire DOM all at once. This was okay when websites were much simpler and developers created them using individual HTML pages, but websites are much more complicated now and often behind a complex CMS like Drupal."><meta property="og:type" content="article"><meta property="og:url" content="https://bkosborne.com/blog/client-side-content-inclusion-in-drupal/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2012-02-04T00:00:00-05:00"><meta property="article:modified_time" content="2012-02-04T00:00:00-05:00"><title>Client-side content inclusion in Drupal Â· Brian Osborne</title><link rel=canonical href=https://bkosborne.com/blog/client-side-content-inclusion-in-drupal/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.531b74bda2bd1e0562323a98f617314ce9c7cc8c8cffbc609f5f690abf6ac68c.css integrity="sha256-Uxt0vaK9HgViMjqY9hcxTOnHzIyM/7xgn19pCr9qxow=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.002ee2378e14c7a68f1f0a53d9694ed252090987c4e768023fac694a4fc5f793.css integrity="sha256-AC7iN44Ux6aPHwpT2WlO0lIJCYfE52gCP6xpSk/F95M=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><meta name=generator content="Hugo 0.82.1"></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Brian Osborne</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://bkosborne.com/blog/client-side-content-inclusion-in-drupal/>Client-side content inclusion in Drupal</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2012-02-04T00:00:00-05:00>February 4, 2012</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
4-minute read</span></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/drupal-planet/>Drupal Planet</a></span></div></div></header><div><p>At <a href=http://www.drupalcampnj.org/>DrupalCamp NJ</a> (the first ever, glad NJ is getting some love!), Jesse Beach from <a href=http://acquia.com>Acquia</a> presented her thoughts how content is served in Drupal, and how to fix some problems that have surfaced over the years of web development. The traditional method for serving content to browsers is to have the server send off the entire DOM all at once. This was okay when websites were much simpler and developers created them using individual HTML pages, but websites are much more complicated now and often behind a complex CMS like Drupal.</p><h2 id=the-problems>The problems
<a class=heading-link href=#the-problems><i class="fa fa-link" aria-hidden=true></i></a></h2><p>To help illustrate this problem, lets take a small Drupal 7 site configuration into consideration. When Drupal serves a page, it does <em>a lot</em> of work for that one request. Drupal needs to load and process every module that is enabled on your website all at once, which is part of the Drupal &ldquo;bootstrap&rdquo; process. This uses up a ton of memory on your the web server&mldr; A Drupal 7 site with ~20 contrib modules enabled could use between 40-50MB of RAM every time a page is requested! To alleviate this, there are a ton of ways you can cache data to prevent the server from working too hard. With anonymous page caching, APC, and CSS & JS caching enabled, you can reduce that memory usage to around 5 MB per anonymous page request. Big difference!</p><p>Even with all of the advances in caching techniques, there is a large push to alter the traditional way that pages are served. Jesse&rsquo;s presentation focused on what&rsquo;s called client-side content inclusion. All this really means is loading content <em>as it&rsquo;s needed</em> and not all at once. Most users only care about the primary page content, especially on mobile devices where bandwidth is a big concern.</p><h2 id=how-its-done>How it&rsquo;s done
<a class=heading-link href=#how-its-done><i class="fa fa-link" aria-hidden=true></i></a></h2><p>So how is this done? Instead of having the server work to serve everything that can possible be on the page, have it instead just load the menu and main content area. In addition, instead of having the server handling templating the data, have the client do it instead. Web browsers and JavaScript are good at working with the DOM, and web servers are best at processing code and sending off data.</p><p>There&rsquo;s are two main ways this is handled. The first is providing links to load secondary content, like a sidebar containing related articles, or comments for a blog post. Once a user clicks these links, JavaScript intercepts the click and sends out a POST request to the server for the additional content. Once the server responds, JavaScript injects the content into the DOM dynamically.</p><p>The second approach is similar, but instead of loading the content when a user takes an action, the content is automatically loaded <em>after</em> the main content has already been retrieved. This is not a new concept by any means, but it&rsquo;s not something that&rsquo;s easily achieved today. However, this approach is not ideal for Drupal because every request bootstraps the whole CMS.</p><p>Ideally the bits of requested data from the server is presented in a raw format like JSON. Then you can use a JavaScript templating plugin to inject the data into an HTML template before then placing that content in the page DOM. This approach takes significant load off of the web server and hands it off to the web browser. Browsers like Chrome and Firefox are constantly releasing new versions with faster and faster JavaScript engines in them that help to improve this workflow.</p><h2 id=thoughts--concerns>Thoughts & concerns
<a class=heading-link href=#thoughts--concerns><i class="fa fa-link" aria-hidden=true></i></a></h2><p>One big concern with doing client side content inclusion is how it effects SEO. Since search engine crawlers don&rsquo;t load JavaScript, they won&rsquo;t see your secondary content that isn&rsquo;t served with the primary page. To get around this, there are some &ldquo;best practices&rdquo; you can use for both SEO and accessibility (screen readers don&rsquo;t load JS either). Have each &ldquo;loader link&rdquo; for secondary content actually go to a real page with the content on it. That Google and screen readers will follow those links just fine and index the content, but you can disable that linking using JavaScript for normal page views. Jesse also mentioned that Google recently blogged about how they are going to begin processing JavaScript on pages though, so that&rsquo;s something to keep an eye on. I couldn&rsquo;t find the blog post she mentioned, but did <a href="http://support.google.com/webmasters/bin/answer.py?hl=en&answer=81766">find this</a>.</p><p>As for Drupal, work is being done to make it easier to include content without doing massive Drupal bootstraps each time. Check out the <a href=http://drupal.org/project/contentapi>Content API</a> module (in active development). There is also a fairly large initiative for Drupal 8 called <a href=http://groups.drupal.org/wscci>WSCCI</a> that is attempting to make Drupal more of a &ldquo;service&rdquo; with a CMS on top of if. That will make it much much easier to do content includes dynamically.</p></div><footer><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//bkosborne.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></footer></article></section></div><footer class=footer><section class=container>Â©
2010 -
2022
Brian Osborne
Â·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/coder.min.39a51230dce2ac866c049b52573e38bf60666af4bc63c1bdf203b9b2d95b1cd6.js integrity="sha256-OaUSMNzirIZsBJtSVz44v2BmavS8Y8G98gO5stlbHNY="></script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "bd8a23ecd0e34c58a89099ab25d009a"}'></script></body></html>